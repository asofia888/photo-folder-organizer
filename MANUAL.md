
# Photo Folder Organizer - ユーザーマニュアル

この度は「Photo Folder Organizer」をご利用いただき、ありがとうございます。このアプリケーションは、たくさんの写真フォルダを日付順に並べ替え、手動で名前を変更するためのツールです。すべての処理はお使いのブラウザ内で完結し、プライバシーを完全に保護しながら効率的な整理作業を実現します。

このマニュアルでは、アプリの基本的な使い方から便利な機能までを分かりやすく解説します。

---

## 目次

1.  [主な機能](#1-主な機能)
2.  [必要なもの（システム要件）](#2-必要なものシステム要件)
3.  [使い方（ステップ・バイ・ステップ）](#3-使い方ステップバイステップ)
    *   [ステップ1: フォルダの準備](#ステップ1-フォルダの準備)
    *   [ステップ2: 日付ルールの選択](#ステップ2-日付ルールの選択)
    *   [ステップ3: フォルダのドラッグ＆ドロップ](#ステップ3-フォルダのドラッグドロップ)
    *   [ステップ4: フォルダ名の設定](#ステップ4-フォルダ名の設定)
    *   [ステップ5A: 直接フォルダ整理（推奨）](#ステップ5a-直接フォルダ整理推奨)
    *   [ステップ5B: リネームスクリプトの生成](#ステップ5b-リネームスクリプトの生成)
4.  [プライバシーとセキュリティについて](#4-プライバシーとセキュリティについて)
5.  [よくある質問（FAQ）](#5-よくある質問faq)

---

## 1. 主な機能

*   **📂 ローカル処理:** あなたの写真は、お使いのコンピュータのブラウザ内のみで処理されます。サーバーにアップロードされることは一切なく、プライバシーは完全に保護されます。
*   **📅 日付による自動ソート:** 各フォルダ内の写真の撮影日（EXIF情報）を読み取り、フォルダ全体を時系列に沿って自動で並べ替えます。
*   **✏️ 手動命名:** 各フォルダに対して、あなた自身が最適な名前を設定できます。日付プレフィックスは自動的に付加されます。
*   **💻 直接フォルダ整理:** Chrome・Edgeブラウザで、アプリから直接コンピューター上にフォルダを作成・整理できます。
*   **📜 一括リネームスクリプト:** 名前を変更するためのスクリプト（Windows用の`.bat`またはMac/Linux用の`.sh`）を生成できます。
*   **⚡ 高性能処理:** 大容量の写真フォルダでも、メモリ効率的な処理とパフォーマンス最適化により快適に動作します。

## 2. 必要なもの（システム要件）

### 🌐 対応ブラウザ
*   **推奨:** **Google Chrome** または **Microsoft Edge** の最新版
    *   直接フォルダ整理機能（File System Access API）をフルサポート
*   **基本機能対応:** Firefox、Safari（最新版）
    *   リネームスクリプト生成機能のみ利用可能
*   **非対応:** モバイルブラウザ（スマートフォン・タブレット）

### 📁 フォルダ構成
整理したい写真フォルダが、一つの親フォルダの中にまとまっている必要があります。

```
例:
My_Trip_Photos/  ← この親フォルダをドラッグ＆ドロップ
├── 東京観光/
│   ├── IMG_001.jpg
│   ├── IMG_002.heic
│   └── photo.png
├── 京都散策/
│   ├── kyoto1.jpg
│   └── kyoto2.webp
└── 大阪グルメ/
    ├── takoyaki.jpg
    └── okonomiyaki.gif
```

### 💾 対応ファイル形式
**標準画像形式:** JPEG、PNG、HEIC、WebP、GIF、BMP、TIFF
**RAWファイル形式:** CR2、CR3、NEF、NRW、ARW、SRF、SR2、DNG、RAF、ORF、RW2、PEF、SRW、X3F、KDC、DCR、MRW、3FR、FFF、IIQ、RWL

**📸 RAW対応について:**
- RAWファイルに埋め込まれたJPEGサムネイルを自動抽出してプレビュー表示
- EXIF情報を読み取って撮影日による自動ソートに対応
- Canon、Nikon、Sony、Adobe、Fujifilm、Olympus、Panasonic等の主要メーカーに対応
- サムネイル抽出ができない場合はRAWアイコンで表示

## 3. 使い方（ステップ・バイ・ステップ）

### ステップ1: フォルダの準備

整理したい複数の写真フォルダを、一つの親フォルダの中にまとめてください。

**例：**
```
旅行写真フォルダ/  ← この親フォルダを準備
├── 東京観光/
├── 京都散策/  
└── 大阪グルメ/
```

### ステップ2: アプリを開く

ブラウザで Photo Folder Organizer を開きます。画面上部に**「あなたの写真はブラウザ内でローカルに処理され、アップロードされることはありません」**という安心メッセージが表示されます。

### ステップ3: 日付ルールの選択

画面中央下部で、各フォルダの代表日付を決定するルールを選択します：

*   **📅 最も古い日付（推奨）:** フォルダ内で最も古い撮影日を代表日とします
    *   旅行の開始日で整理したい場合に最適
*   **📅 最も新しい日付:** フォルダ内で最も新しい撮影日を代表日とします

### ステップ4: フォルダのドラッグ＆ドロップ

準備した**親フォルダ**を、画面中央の「📁 ここにフォルダをドラッグ＆ドロップ」エリアにドラッグ＆ドロップします。

**処理開始：**
*   フォルダのスキャンと写真のEXIF情報読み取りが始まります
*   進捗バーで処理状況を確認できます
*   写真の枚数によって数秒～数分かかる場合があります

### ステップ4: フォルダ名の設定

処理が完了すると、解析されたフォルダがカード形式で一覧表示されます。各カードには：

*   📸 **写真プレビュー**（最大4枚のサムネイル）
*   📅 **代表日付**
*   📁 **元のフォルダ名**
*   ✏️ **新しい名前入力欄**

**操作手順：**
1.  **新しい名前を入力:** 各フォルダの名前入力欄に、わかりやすい名前を入力
    *   例：`東京観光` → `2023-08-15_東京観光` として保存されます
2.  **保存:** 💾 保存ボタンをクリックして名前を確定
3.  **必要に応じて編集:** ✏️ 編集ボタンで保存済みの名前を再編集可能

### ステップ5A: 直接フォルダ整理（推奨）

**Chrome・Edgeブラウザをお使いの場合、この方法が最も簡単です！**

名前を設定したフォルダがある場合、画面上部に **💻「コンピューターに整理」**ボタンが表示されます。

**操作手順：**
1.  **💻「コンピューターに整理」をクリック**
2.  **保存先フォルダを選択** - フォルダ選択ダイアログが開きます
3.  **自動処理開始** - アプリが以下を自動実行：
    *   新しい名前でフォルダを作成
    *   各写真を対応するフォルダに移動
    *   進捗状況をリアルタイム表示

**完了！** すべての写真が新しい名前のフォルダに整理されます。

### ステップ5B: リネームスクリプトの生成

**Firefox・Safariブラウザ、または手動での整理を希望される場合**

一つ以上のフォルダ名を保存すると、画面下部に **📜「リネームスクリプトを生成」**ボタンが表示されます。

**操作手順：**
1.  **📜「リネームスクリプトを生成」をクリック**
2.  **スクリプトファイルがダウンロード**されます：
    *   Windows: `rename_folders.bat`
    *   Mac/Linux: `rename_folders.sh`

**スクリプトの実行：**
1.  ダウンロードしたスクリプトファイルを、**元の親フォルダ**の中に移動
2.  スクリプトを実行：
    *   **Windows:** `rename_folders.bat`をダブルクリック
    *   **Mac/Linux:** ターミナルで `sh rename_folders.sh`

**結果：** すべてのフォルダが新しい名前に一括変更されます。

---

## 4. プライバシーとセキュリティについて

### 🔒 完全なプライバシー保護

このアプリケーションは、**ユーザーのプライバシーを最優先に設計**されています。

**✅ ブラウザ内完結処理**
*   すべてのファイル処理（EXIF情報の読み取り、サムネイル生成、フォルダ解析）は、あなたのブラウザ内で完結
*   写真やファイル情報が外部サーバーに送信されることは**一切ありません**

**✅ 安全な処理方式**
*   写真データは一時的にメモリ内でのみ処理
*   処理完了後は自動的にメモリから削除
*   ネットワーク通信は一切発生しません

**✅ オープンソース**
*   ソースコードは GitHub で公開
*   処理内容は透明性をもって確認可能

---

## 5. よくある質問（FAQ）

### 🔧 **基本的な使い方について**

**Q: フォルダをドロップしたのに、何も表示されません**
**A:** 以下をご確認ください：
*   📁 **フォルダ構成:** サブフォルダを含む親フォルダをドロップしていますか？
*   📸 **画像ファイル:** 対応画像ファイル（JPEG、PNG、HEIC等）が含まれていますか？
*   🌐 **ブラウザ:** Chrome、Edge、Firefox、Safariの最新版をお使いですか？
*   🕐 **処理時間:** 大量の写真がある場合、処理に時間がかかることがあります

**Q: 処理がとても遅いです**
**A:** 以下が処理時間に影響します：
*   📊 写真の枚数（数千枚以上で数分かかる場合があります）
*   💻 コンピューターの性能
*   🔍 EXIF情報の読み取り作業

### 💻 **ブラウザ固有の問題**

**Q: 「コンピューターに整理」ボタンが表示されません**
**A:** このボタンはChrome・Edgeでのみ利用可能です。Firefox・Safariでは「リネームスクリプト生成」をご利用ください。

**Q: ファイルアクセス許可のダイアログが表示されます**
**A:** Chrome・Edgeの直接フォルダ整理機能使用時は、セキュリティ上の理由でファイルアクセス許可が必要です。「許可」を選択してください。

### 📜 **スクリプト関連**

**Q: スクリプトを実行してもフォルダ名が変わりません**
**A:** 以下をご確認ください：
*   📁 スクリプトファイルが元の親フォルダ内に配置されているか
*   🖱️ 実行方法が正しいか（Windowsはダブルクリック、Mac/Linuxはターミナル）
*   🔑 Mac/Linuxで権限エラーが出る場合：`chmod +x rename_folders.sh`を実行

**Q: スクリプトでエラーが発生します**
**A:** フォルダ名に使用できない文字（`< > : " | ? * /`等）が含まれている可能性があります。アプリで名前を再設定してください。

### 🔍 **その他**

**Q: 対応している画像形式を教えてください**
**A:** 
- **標準画像:** JPEG、PNG、HEIC、WebP、GIF、BMP、TIFF
- **RAWファイル:** CR2、CR3、NEF、NRW、ARW、SRF、SR2、DNG、RAF、ORF、RW2、PEF、SRW、X3F等の主要形式に対応

**Q: RAWファイルのサムネイルが表示されません**
**A:** RAWファイルに埋め込みサムネイルがない場合があります。その場合はRAWアイコンが表示されますが、EXIF情報は読み取られて日付ソートは正常に動作します。

**Q: RAWファイルの処理が遅いです**
**A:** RAWファイルは通常のファイルより大きく（20-100MB程度）、処理に時間がかかります。特に100MB以上の大きなファイルでは数秒かかる場合があります。

**Q: 動画ファイルは処理されますか？**
**A:** 現在は画像ファイルのみ対応しています。動画ファイルは処理対象外です。
